<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sly 1 Decomp: Sly Cooper and the Thievius Raccoonus</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sly 1 Decomp
   </div>
   <div id="projectbrief">DecompilationofSlyCooperandtheThieviusRaccoonus</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Sly Cooper and the Thievius Raccoonus </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://ci.appveyor.com/project/TheOnlyZac/sly1/branch/main"><img src="https://ci.appveyor.com/api/projects/status/800esepa77ctpv5p/branch/main?svg=true" alt="Build status" class="inline"/></a> <a href="https://discord.gg/2GSXcEzPJA"><img src="https://img.shields.io/discord/439454661100175380?color=%235865F2&amp;logo=discord&amp;logoColor=%23FFFFFF" alt="Discord Channel" class="inline"/></a> <a href="https://github.com/theonlyzac/sly1/graphs/contributors"><img src="https://img.shields.io/github/contributors/theonlyzac/sly1?color=%23db6d28" alt="Contributors" class="inline"/></a> <a href="https://theonlyzac.github.io/sly1"><img src="https://img.shields.io/badge/docs-doxygen-2C4AA8" alt="Docs" class="inline"/></a> <a href="https://slymods.info"><img src="https://img.shields.io/badge/wiki-slymods.info-2C4AA8" alt="Wiki" class="inline"/></a></p>
<p><a href="https://theonlyzac.github.io/sly1"><img src="logo.png" alt="" style="margin:7px" align="right" width="33%" class="inline"/></a></p>
<p>This is a work-in-progress decompilation of <a href="https://en.wikipedia.org/wiki/Sly_Cooper_and_the_Thievius_Raccoonus"><em>Sly Cooper and the Thievius Raccoonus</em></a> for the PlayStation 2. It is based on the NTSC-U version of the game (<code>SCUS-971.98</code>).</p>
<p>The goal of this project is to better understand how the game works. This repo does not contain any game assets or code from the game's executable.</p>
<p>Documentation of the code can be found at <a href="https://theonlyzac.github.io/sly1">theonlyzac.github.io/sly1</a>. For further reading on the game's internal structures and mechanics, visit the <a href="https://slymods.info">SlyMods Wiki</a>.</p>
<p>New contributors are welcome and encouraged to make a pull request! If you would like to help but aren't sure where to start, check out CONTRIBUTING.md and feel free to <a href="https://discord.gg/2GSXcEzPJA">join our Discord server</a> for guidance.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Building</h1>
<p>The project can be built on Windows or Linux using <code>make</code>. It will build the executable <code>SCUS_971.98</code>.</p>
<p>The <code>scripts</code> directory contains scripts for setting up the build environment on each platform, which involves downloading and installing the required runtime libraries.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Linux/WSL</h2>
<p><b>Prerequisites</b>: <code>git</code>, <code>make</code>, <code>wine</code>, <code>p7zip-full</code></p>
<div class="fragment"><div class="line">git clone https://github.com/TheOnlyZac/sly1</div>
<div class="line">cd sly1/scripts</div>
<div class="line">./setup-progd-linux.sh</div>
<div class="line">cd ..</div>
<div class="line">make</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
Windows</h2>
<p><b>Prerequisites</b>: <code>git</code>, <code>make</code>, <code>7zip</code></p>
<div class="fragment"><div class="line">git clone https://github.com/TheOnlyZac/sly1</div>
<div class="line">cd sly1\scripts</div>
<div class="line">.\setup-progd-windows.bat</div>
<div class="line">cd ..</div>
<div class="line">make</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Running</h2>
<p>Running the executable requires the <a href="https://pcsx2.net/">PCSX2 emulator</a>.</p><ul>
<li>For PCSX2 1.6, click <code>System &gt; Run ELF...</code> and select the compiled executable. You may need to change the file type to "All Files".</li>
<li>For PCSX2 1.7, add the <code>bin</code> dir to your Games folders and the ELF will show up as a game in your library. When it asks you to search recursively, say yes.</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Project Structure</h1>
<p>The project is split into the following directories.</p>
<ul>
<li><code>src</code> - Contains the decompiled source code.<ul>
<li>All of the code for the game engine is in <code>src/P2</code>.</li>
<li>Code for the game's scripting engine, Splice, is in <code>src/P2/splice</code>.</li>
</ul>
</li>
<li><code>test</code> - Contains subdirectories for each game system. Each subdirectory contains unit tests for that system.</li>
<li><code>build</code> - Makefiles used to build the executable.</li>
<li><code>scripts</code> - Utility scripts for setting up the build environment.</li>
<li><code>tools</code> - Utilities for function matching.</li>
</ul>
<p>Additionally, when you build the executable, the following directories will be created.</p><ul>
<li><code>obj</code> - Compiled object files.</li>
<li><code>bin</code> - Compiled executables.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
FAQ</h1>
<h3><a class="anchor" id="autotoc_md7"></a>
What is a decompilation?</h3>
<p>When the developers created the game, they wrote programming code that we call the source code, and compiled that into an exectuable which can run on the PS2. Our job is to reverse-engineer the compiled code and produce new, original code that behaves the same way. This process leaves us with code that is very similar (but not identical) to the source code and helps us understand what the programmers were thinking when they made the game.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
How does it work?</h3>
<p>We use a tool called <a href="https://ghidra-sre.org/">Ghidra</a> which was created by the <a href="https://www.nsa.gov/">NSA</a> for reverse-engineering software. Ghidra analyzes the game binary to identity functions, variables, data types and structures. We then reimplement each individual function by writing C++ code that produces the same output. We do not copy/paste any code or include any original assembly code from the game binary in the decompilation.</p>
<h3><a class="anchor" id="autotoc_md9"></a>
Has this ever been done before?</h3>
<p>This is one of the first major PS2 decompilations. We take inspiration from other decomp projects such as the <a href="https://github.com/n64decomp/sm64">Super Mario 64 decomp</a> for the N64 and the <a href="https://github.com/zeldaret/botw">Breath of the Wild decomp</a> for the Wii U (the latter being more similar in scope to this project). There is a Jak &amp; Daxter decomp/PC port called <a href="https://github.com/open-goal/jak-project">OpenGOAL</a>, though that game is written in 98% GOAL language rather than C/C++.</p>
<h3><a class="anchor" id="autotoc_md10"></a>
Is this a matching decomp?</h3>
<p>This is the first PS2 decompilation project to target the PS2 and utilize function matching. Most of the decompiled code is not yet matching, and we do not currently require it, but the ultimate goal is to match as many functions as possible.</p>
<h3><a class="anchor" id="autotoc_md11"></a>
How can I help?</h3>
<p>If you want to contribute, read through CONTRIBUTING.md and feel free to <a href="https://discord.gg/gh5xwfj">join our discord server</a> if you have any questions!</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Star History</h1>
<p><a href="https://star-history.com/#theonlyzac/sly1&amp;Date"><img src="https://api.star-history.com/svg?repos=theonlyzac/sly1&amp;type=Date" alt="Star History Chart" class="inline"/>  </a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
